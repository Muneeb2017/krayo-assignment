{"ast":null,"code":"import { getFocusableChild, isTabbable } from './utils/iterate-focusable-elements.js';\nimport { polyfill as eventListenerSignalPolyfill } from './polyfills/event-listener-signal.js';\neventListenerSignalPolyfill();\nconst suspendedTrapStack = [];\nlet activeTrap = undefined;\nfunction tryReactivate() {\n  const trapToReactivate = suspendedTrapStack.pop();\n  if (trapToReactivate) {\n    focusTrap(trapToReactivate.container, trapToReactivate.initialFocus, trapToReactivate.originalSignal);\n  }\n}\nfunction followSignal(signal) {\n  const controller = new AbortController();\n  signal.addEventListener('abort', () => {\n    controller.abort();\n  });\n  return controller;\n}\nexport function focusTrap(container, initialFocus, abortSignal) {\n  const controller = new AbortController();\n  const signal = abortSignal !== null && abortSignal !== void 0 ? abortSignal : controller.signal;\n  container.setAttribute('data-focus-trap', 'active');\n  const sentinelStart = document.createElement('span');\n  sentinelStart.setAttribute('class', 'sentinel');\n  sentinelStart.setAttribute('tabindex', '0');\n  sentinelStart.setAttribute('aria-hidden', 'true');\n  sentinelStart.onfocus = () => {\n    const lastFocusableChild = getFocusableChild(container, true);\n    lastFocusableChild === null || lastFocusableChild === void 0 ? void 0 : lastFocusableChild.focus();\n  };\n  const sentinelEnd = document.createElement('span');\n  sentinelEnd.setAttribute('class', 'sentinel');\n  sentinelEnd.setAttribute('tabindex', '0');\n  sentinelEnd.setAttribute('aria-hidden', 'true');\n  sentinelEnd.onfocus = () => {\n    const firstFocusableChild = getFocusableChild(container);\n    firstFocusableChild === null || firstFocusableChild === void 0 ? void 0 : firstFocusableChild.focus();\n  };\n  container.prepend(sentinelStart);\n  container.append(sentinelEnd);\n  let lastFocusedChild = undefined;\n  function ensureTrapZoneHasFocus(focusedElement) {\n    if (focusedElement instanceof HTMLElement && document.contains(container)) {\n      if (container.contains(focusedElement)) {\n        lastFocusedChild = focusedElement;\n        return;\n      } else {\n        if (lastFocusedChild && isTabbable(lastFocusedChild) && container.contains(lastFocusedChild)) {\n          lastFocusedChild.focus();\n          return;\n        } else if (initialFocus && container.contains(initialFocus)) {\n          initialFocus.focus();\n          return;\n        } else {\n          const firstFocusableChild = getFocusableChild(container);\n          firstFocusableChild === null || firstFocusableChild === void 0 ? void 0 : firstFocusableChild.focus();\n          return;\n        }\n      }\n    }\n  }\n  const wrappingController = followSignal(signal);\n  if (activeTrap) {\n    const suspendedTrap = activeTrap;\n    activeTrap.container.setAttribute('data-focus-trap', 'suspended');\n    activeTrap.controller.abort();\n    suspendedTrapStack.push(suspendedTrap);\n  }\n  wrappingController.signal.addEventListener('abort', () => {\n    activeTrap = undefined;\n  });\n  signal.addEventListener('abort', () => {\n    container.removeAttribute('data-focus-trap');\n    const sentinels = container.getElementsByClassName('sentinel');\n    while (sentinels.length > 0) sentinels[0].remove();\n    const suspendedTrapIndex = suspendedTrapStack.findIndex(t => t.container === container);\n    if (suspendedTrapIndex >= 0) {\n      suspendedTrapStack.splice(suspendedTrapIndex, 1);\n    }\n    tryReactivate();\n  });\n  document.addEventListener('focus', event => {\n    ensureTrapZoneHasFocus(event.target);\n  }, {\n    signal: wrappingController.signal,\n    capture: true\n  });\n  ensureTrapZoneHasFocus(document.activeElement);\n  activeTrap = {\n    container,\n    controller: wrappingController,\n    initialFocus,\n    originalSignal: signal\n  };\n  const suspendedTrapIndex = suspendedTrapStack.findIndex(t => t.container === container);\n  if (suspendedTrapIndex >= 0) {\n    suspendedTrapStack.splice(suspendedTrapIndex, 1);\n  }\n  if (!abortSignal) {\n    return controller;\n  }\n}","map":{"version":3,"names":["getFocusableChild","isTabbable","polyfill","eventListenerSignalPolyfill","suspendedTrapStack","activeTrap","undefined","tryReactivate","trapToReactivate","pop","focusTrap","container","initialFocus","originalSignal","followSignal","signal","controller","AbortController","addEventListener","abort","abortSignal","setAttribute","sentinelStart","document","createElement","onfocus","lastFocusableChild","focus","sentinelEnd","firstFocusableChild","prepend","append","lastFocusedChild","ensureTrapZoneHasFocus","focusedElement","HTMLElement","contains","wrappingController","suspendedTrap","push","removeAttribute","sentinels","getElementsByClassName","length","remove","suspendedTrapIndex","findIndex","t","splice","event","target","capture","activeElement"],"sources":["/home/muneeb/assignment-krayo/frontend/node_modules/@primer/behaviors/dist/esm/focus-trap.js"],"sourcesContent":["import { getFocusableChild, isTabbable } from './utils/iterate-focusable-elements.js';\nimport { polyfill as eventListenerSignalPolyfill } from './polyfills/event-listener-signal.js';\neventListenerSignalPolyfill();\nconst suspendedTrapStack = [];\nlet activeTrap = undefined;\nfunction tryReactivate() {\n    const trapToReactivate = suspendedTrapStack.pop();\n    if (trapToReactivate) {\n        focusTrap(trapToReactivate.container, trapToReactivate.initialFocus, trapToReactivate.originalSignal);\n    }\n}\nfunction followSignal(signal) {\n    const controller = new AbortController();\n    signal.addEventListener('abort', () => {\n        controller.abort();\n    });\n    return controller;\n}\nexport function focusTrap(container, initialFocus, abortSignal) {\n    const controller = new AbortController();\n    const signal = abortSignal !== null && abortSignal !== void 0 ? abortSignal : controller.signal;\n    container.setAttribute('data-focus-trap', 'active');\n    const sentinelStart = document.createElement('span');\n    sentinelStart.setAttribute('class', 'sentinel');\n    sentinelStart.setAttribute('tabindex', '0');\n    sentinelStart.setAttribute('aria-hidden', 'true');\n    sentinelStart.onfocus = () => {\n        const lastFocusableChild = getFocusableChild(container, true);\n        lastFocusableChild === null || lastFocusableChild === void 0 ? void 0 : lastFocusableChild.focus();\n    };\n    const sentinelEnd = document.createElement('span');\n    sentinelEnd.setAttribute('class', 'sentinel');\n    sentinelEnd.setAttribute('tabindex', '0');\n    sentinelEnd.setAttribute('aria-hidden', 'true');\n    sentinelEnd.onfocus = () => {\n        const firstFocusableChild = getFocusableChild(container);\n        firstFocusableChild === null || firstFocusableChild === void 0 ? void 0 : firstFocusableChild.focus();\n    };\n    container.prepend(sentinelStart);\n    container.append(sentinelEnd);\n    let lastFocusedChild = undefined;\n    function ensureTrapZoneHasFocus(focusedElement) {\n        if (focusedElement instanceof HTMLElement && document.contains(container)) {\n            if (container.contains(focusedElement)) {\n                lastFocusedChild = focusedElement;\n                return;\n            }\n            else {\n                if (lastFocusedChild && isTabbable(lastFocusedChild) && container.contains(lastFocusedChild)) {\n                    lastFocusedChild.focus();\n                    return;\n                }\n                else if (initialFocus && container.contains(initialFocus)) {\n                    initialFocus.focus();\n                    return;\n                }\n                else {\n                    const firstFocusableChild = getFocusableChild(container);\n                    firstFocusableChild === null || firstFocusableChild === void 0 ? void 0 : firstFocusableChild.focus();\n                    return;\n                }\n            }\n        }\n    }\n    const wrappingController = followSignal(signal);\n    if (activeTrap) {\n        const suspendedTrap = activeTrap;\n        activeTrap.container.setAttribute('data-focus-trap', 'suspended');\n        activeTrap.controller.abort();\n        suspendedTrapStack.push(suspendedTrap);\n    }\n    wrappingController.signal.addEventListener('abort', () => {\n        activeTrap = undefined;\n    });\n    signal.addEventListener('abort', () => {\n        container.removeAttribute('data-focus-trap');\n        const sentinels = container.getElementsByClassName('sentinel');\n        while (sentinels.length > 0)\n            sentinels[0].remove();\n        const suspendedTrapIndex = suspendedTrapStack.findIndex(t => t.container === container);\n        if (suspendedTrapIndex >= 0) {\n            suspendedTrapStack.splice(suspendedTrapIndex, 1);\n        }\n        tryReactivate();\n    });\n    document.addEventListener('focus', event => {\n        ensureTrapZoneHasFocus(event.target);\n    }, { signal: wrappingController.signal, capture: true });\n    ensureTrapZoneHasFocus(document.activeElement);\n    activeTrap = {\n        container,\n        controller: wrappingController,\n        initialFocus,\n        originalSignal: signal\n    };\n    const suspendedTrapIndex = suspendedTrapStack.findIndex(t => t.container === container);\n    if (suspendedTrapIndex >= 0) {\n        suspendedTrapStack.splice(suspendedTrapIndex, 1);\n    }\n    if (!abortSignal) {\n        return controller;\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}